# üöÄ Quick Start Guide

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

### 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
npm install
```

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–°–∫–æ–ø–∏—Ä—É–π—Ç–µ `.env.example` –∏ –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:

```bash
# –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è –∑–∞–ø—É—Å–∫–∞
BOT_TOKEN=your_telegram_bot_token_from_botfather
DATABASE_URL=postgresql://postgres:postgres@localhost:5432/cashback_bot
DEEPSEEK_API_KEY=your_deepseek_api_key  # –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ Yandex GPT
```

### 3. –ó–∞–ø—É—Å–∫ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

#### –í–∞—Ä–∏–∞–Ω—Ç A: –õ–æ–∫–∞–ª—å–Ω—ã–π PostgreSQL (–¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏)

```bash
# –°–æ–∑–¥–∞–π—Ç–µ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö
createdb cashback_bot

# –ü—Ä–∏–º–µ–Ω–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏–∏
psql cashback_bot < src/database/migrations/001_initial_schema.sql
```

### 4. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

```bash
npm run seed
```

–≠—Ç–æ –¥–æ–±–∞–≤–∏—Ç:
- 2 –±–∞–Ω–∫–∞ (–°–±–µ—Ä–±–∞–Ω–∫, –¢–∏–Ω—å–∫–æ—Ñ—Ñ)
- –ù–µ—Å–∫–æ–ª—å–∫–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–π –∫—ç—à–±—ç–∫–∞ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –±–∞–Ω–∫–∞
- MCC-–∫–æ–¥—ã

### 5. –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞

```bash
npm run dev
```

–ë–æ—Ç –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è –≤ —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–æ–π –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Ñ–∞–π–ª–æ–≤.

## üöÄ –î–µ–ø–ª–æ–π –≤ Kubernetes

–î–ª—è production –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ Kubernetes:

```bash
# 1. –°–æ–±–µ—Ä–∏—Ç–µ Docker –æ–±—Ä–∞–∑
docker build -t your-username/cashback-bot:latest .

# 2. –û–ø—É–±–ª–∏–∫—É–π—Ç–µ –æ–±—Ä–∞–∑
docker push your-username/cashback-bot:latest

# 3. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ —Å–µ–∫—Ä–µ—Ç—ã –≤ k8s/ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏
# –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ k8s/postgres-secret.yaml –∏ k8s/bot-secret.yaml

# 4. –î–µ–ø–ª–æ–π
kubectl apply -k k8s/

# 5. –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
kubectl logs -f deployment/cashback-bot -n cashback-bot
```

–ü–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è: [K8S_DEPLOY.md](K8S_DEPLOY.md)

### –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞ —Å Kubernetes (minikube/kind)

–î–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å minikube –∏–ª–∏ kind:

```bash
# –ó–∞–ø—É—Å–∫ minikube
minikube start

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Docker registry minikube
eval $(minikube docker-env)
docker build -t cashback-bot:latest .

# –î–µ–ø–ª–æ–π –≤ minikube
kubectl apply -k k8s/
```

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å–µ —Ç–µ—Å—Ç—ã
npm test

# –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤ watch —Ä–µ–∂–∏–º–µ
npm run test:watch

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–∫—Ä—ã—Ç–∏–µ
npm run test:coverage
```

## üìù –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–¥–∞

```bash
# –õ–∏–Ω—Ç–∏–Ω–≥
npm run lint

# –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–æ–∫ –ª–∏–Ω—Ç–∏–Ω–≥–∞
npm run lint:fix

# –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞
npm run format

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–æ–≤
npm run typecheck
```

## üîß Production Build

```bash
# –°–±–æ—Ä–∫–∞
npm run build

# –ó–∞–ø—É—Å–∫ production –≤–µ—Ä—Å–∏–∏
npm start
```

## üì± –ö–æ–º–∞–Ω–¥—ã –±–æ—Ç–∞ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ –æ—Ç–∫—Ä–æ–π—Ç–µ —Å–≤–æ–µ–≥–æ –±–æ—Ç–∞ –≤ Telegram –∏ –ø–æ–ø—Ä–æ–±—É–π—Ç–µ:

1. `/start` - –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
2. `/help` - –°–ø—Ä–∞–≤–∫–∞
3. `/banks` - –°–ø–∏—Å–æ–∫ –±–∞–Ω–∫–æ–≤
4. –û—Ç–ø—Ä–∞–≤—å—Ç–µ —Ç–µ–∫—Å—Ç: "–∫–∞–∫–∏–µ mcc-–∫–æ–¥—ã –¥–ª—è –æ–¥–µ–∂–¥—ã –≤ –°–±–µ—Ä–µ"
5. –û—Ç–ø—Ä–∞–≤—å—Ç–µ —Ç–µ–∫—Å—Ç: "–∫ –∫–∞–∫–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –æ—Ç–Ω–æ—Å–∏—Ç—Å—è –∫–æ–¥ 5811"

## üêõ –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –Ω–µ –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è

```bash
# –î–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ PostgreSQL
pg_isready

# –î–ª—è Kubernetes
kubectl get pods -n cashback-bot
kubectl logs deployment/postgres -n cashback-bot
```

### –ë–æ—Ç –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `BOT_TOKEN` –≤ —Å–µ–∫—Ä–µ—Ç–∞—Ö Kubernetes –∏–ª–∏ `.env`
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ç–æ–∫–µ–Ω –≤–∞–ª–∏–¥–Ω—ã–π (–ø–æ–ª—É—á–µ–Ω –æ—Ç @BotFather)
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏:
   - –õ–æ–∫–∞–ª—å–Ω–æ: —Ç–µ—Ä–º–∏–Ω–∞–ª –∏–ª–∏ `logs/combined.log`
   - Kubernetes: `kubectl logs deployment/cashback-bot -n cashback-bot`

### LangChain –æ—à–∏–±–∫–∏

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `DEEPSEEK_API_KEY` –∏–ª–∏ `YANDEX_API_KEY`
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É –≤–∞—Å –µ—Å—Ç—å –¥–æ—Å—Ç—É–ø –∫ API
3. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç—å –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞ –≤ `.env`

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

- [–ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](README.md)
- [API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](docs/API.md)
- [–°—Ö–µ–º–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö](docs/DATABASE.md)
- [–ü—Ä–∞–≤–∏–ª–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏](.cursorrules)

## üéØ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. **–î–æ–±–∞–≤—å—Ç–µ –±–æ–ª—å—à–µ –±–∞–Ω–∫–æ–≤**: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `/admin_add_bank` (–Ω—É–∂–Ω–æ –±—ã—Ç—å –≤ `ADMIN_USER_IDS`)
2. **–ó–∞–≥—Ä—É–∑–∏—Ç–µ PDF —Å –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º–∏**: `/admin_parse_pdf`
3. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ webhook** –¥–ª—è production (–≤–º–µ—Å—Ç–æ polling)
4. **–î–æ–±–∞–≤—å—Ç–µ Sentry** –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –æ—à–∏–±–æ–∫
5. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ Prometheus** –¥–ª—è –º–µ—Ç—Ä–∏–∫

## üí° –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

```bash
# –ü—Ä–æ—Å–º–æ—Ç—Ä —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
psql cashback_bot -c "\dt"

# –≠–∫—Å–ø–æ—Ä—Ç –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
pg_dump cashback_bot > backup.sql

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
tail -f logs/combined.log

# –û—á–∏—Å—Ç–∫–∞
npm run clean  # (–Ω—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –≤ package.json)
rm -rf dist node_modules
```

---

–£–¥–∞—á–∏ –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ! üöÄ

